#define HEADER_1 0xAA
#define HEADER_2 0x55
#define END_MARKER 0xFF  // placeholder to indicate packet end
#define LED_PIN 2

// #define SAMPLES_PER_PACKET 10
const uint16_t heartbeat_signal[] = {1820, 1811, 1803, 1803, 1803, 1786, 1778, 1778, 1778, 1795, 1803, 1803, 1786, 1778, 1778, 1803, 1836, 1861, 1903, 1961, 2037, 2120, 2170, 2145, 2012, 1795, 1561, 1394, 1344, 1419, 1569, 1720, 1803, 1820, 1803, 1795, 1795, 1811, 1836, 1836, 1836, 1828, 1836, 1845, 1853, 1853, 1853, 1853, 1853, 1861, 1870, 1878, 1878, 1878, 1886, 1895, 1911, 1928, 1936, 1945, 1953, 1970, 1995, 2012, 2037, 2045, 2062, 2078, 2095, 2112, 2128, 2137, 2137, 2137, 2137, 2137, 2128, 2128, 2112, 2095, 2070, 2037, 2012, 1987, 1961, 1945, 1920, 1895, 1870, 1861, 1853, 1845, 1836, 1836, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1820, 1820, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1803, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1811, 1820, 1811, 1811, 1811, 1820, 1828, 1836, 1836, 1836, 1828, 1828, 1836, 1836, 1828, 1820, 1803, 1795, 1795, 1803, 1803, 1795, 1786, 1778, 1778, 1786, 1795, 1786, 1778, 1778, 1786, 1811, 1845, 1878, 1928, 1995, 2078, 2153, 2170, 2095, 1911, 1678, 1461, 1344, 1361, 1486, 1644, 1761, 1811, 1811, 1795, 1786, 1803, 1828, 1836, 1828, 1820, 1820, 1836, 1853, 1861, 1861, 1853, 1845, 1853, 1861, 1878, 1886, 1886, 1886, 1895, 1911, 1928, 1945, 1945, 1953, 1970, 1987, 2012, 2037, 2053, 2070, 2078, 2103, 2120, 2137, 2153, 2162, 2170, 2170, 2170, 2170, 2153, 2137, 2120, 2095, 2078, 2045, 2020, 1987, 1953, 1928, 1911, 1895, 1878, 1861, 1853, 1845, 1836, 1836, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1820, 1820, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1795, 1795, 1795, 1795, 1795, 1795, 1803, 1803, 1811, 1811, 1803, 1803, 1811, 1828, 1845, 1853, 1845, 1836, 1828, 1828, 1828, 1836, 1828, 1820, 1803, 1795, 1795, 1795, 1786, 1778, 1770, 1770, 1778, 1786, 1786, 1778, 1770, 1770, 1786, 1820, 1861, 1886, 1945, 2012, 2103, 2162, 2153, 2028, 1820, 1553, 1352, 1277, 1344, 1511, 1678, 1786, 1820, 1803, 1778, 1778, 1803, 1828, 1836, 1828, 1820, 1820, 1836, 1853, 1861, 1853, 1853, 1853, 1861, 1870, 1886, 1886, 1895, 1895, 1911, 1928, 1936, 1953, 1961, 1970, 1987, 2003, 2028, 2053, 2070, 2087, 2103, 2120, 2137, 2153, 2162, 2170, 2178, 2178, 2178, 2178, 2178, 2162, 2137, 2112, 2087, 2053, 2020, 1987, 1961, 1936, 1911, 1886, 1870, 1861, 1861, 1853, 1845, 1836, 1828, 1820, 1820, 1820, 1828, 1828, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1820, 1820, 1820, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1795, 1803, 1803, 1803, 1795, 1795, 1795, 1803, 1811, 1811, 1811, 1811, 1803, 1811, 1828, 1845, 1853, 1853, 1845, 1836, 1828, 1836, 1836, 1828, 1811, 1803, 1795, 1795, 1795, 1795, 1795, 1786, 1778, 1786, 1795, 1795, 1786, 1778, 1770, 1786, 1811, 1853, 1895, 1945, 2020, 2095, 2162, 2153, 2045, 1845, 1586, 1377, 1277, 1327, 1478, 1644, 1770, 1820, 1811, 1786, 1786, 1803, 1836, 1845, 1845, 1828, 1828, 1836, 1853, 1861, 1861, 1853, 1853, 1861, 1870, 1878, 1886, 1886, 1886, 1895, 1911, 1928, 1945, 1953, 1961, 1970, 1987, 2012, 2028, 2045, 2062, 2078, 2095, 2112, 2128, 2137, 2145, 2153, 2153, 2153, 2145, 2137, 2120, 2112, 2095, 2070, 2053, 2020, 1995, 1961, 1936, 1911, 1895, 1878, 1870, 1861, 1853, 1845, 1836, 1836, 1828, 1828, 1828, 1828, 1836, 1828, 1828, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1828, 1828, 1836, 1836, 1836, 1836, 1836, 1836, 1836, 1836, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1803, 1803, 1803, 1811, 1811, 1811, 1811, 1803, 1795, 1795, 1795, 1803, 1803, 1803, 1803, 1803, 1811, 1811, 1811, 1811, 1811, 1811, 1820, 1828, 1845, 1845, 1845, 1836, 1828, 1828, 1836, 1828, 1820, 1811, 1803, 1803, 1803, 1803, 1803, 1786, 1778, 1786, 1795, 1803, 1803, 1795, 1778, 1778, 1795, 1828, 1861, 1903, 1961, 2037, 2120, 2170, 2145, 2012, 1795, 1553, 1394, 1336, 1419, 1569, 1711, 1803, 1820, 1803, 1795, 1803, 1820, 1845, 1845, 1836, 1828, 1836, 1845, 1853, 1861, 1853, 1853, 1861, 1861, 1878, 1886, 1886, 1886, 1886, 1903, 1911, 1928, 1936, 1953, 1961, 1978, 1995, 2020, 2037, 2053, 2062, 2087, 2103, 2120, 2128, 2137, 2145, 2153, 2153, 2153, 2145, 2137, 2120, 2103, 2087, 2070, 2037, 2012, 1978, 1945, 1928, 1911, 1895, 1878, 1861, 1853, 1845, 1845, 1836, 1836, 1828, 1828, 1820, 1820, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1820, 1828, 1828, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1811, 1811, 1811, 1811, 1811, 1820, 1828, 1836, 1845, 1845, 1836, 1828, 1828, 1836, 1836, 1836, 1828, 1811, 1795, 1795, 1795, 1795, 1786, 1778, 1778, 1778, 1795, 1795, 1786, 1778, 1770, 1778, 1803, 1836, 1870, 1920, 1978, 2053, 2137, 2170, 2112, 1945, 1720, 1486, 1344, 1336, 1453, 1611, 1745, 1811, 1820, 1795, 1778, 1795, 1820, 1836, 1836, 1820, 1820, 1828, 1845, 1853, 1853, 1853, 1853, 1861, 1861, 1878, 1886, 1886, 1886, 1895, 1911, 1928, 1945, 1953, 1961, 1970, 1987, 2003, 2028, 2053, 2070, 2087, 2112, 2128, 2145, 2162, 2170, 2170, 2178, 2178, 2178, 2178, 2162, 2137, 2112, 2087, 2062, 2037, 2012, 1978, 1953, 1928, 1903, 1886, 1870, 1861, 1853, 1845, 1836, 1828, 1828, 1820, 1820, 1811, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1795, 1795, 1803, 1803, 1803, 1795, 1795, 1803, 1803, 1811, 1811, 1811, 1820, 1828, 1836, 1845, 1836, 1836, 1828, 1828, 1828, 1828, 1828, 1811, 1803, 1803, 1803, 1795, 1795, 1778, 1770, 1770, 1778, 1786, 1786, 1778, 1770, 1770, 1786, 1811, 1853, 1886, 1936, 2003, 2087, 2153, 2153, 2053, 1853, 1594, 1369, 1261, 1302, 1453, 1628, 1761, 1811, 1811, 1786, 1778, 1803, 1828, 1845, 1836, 1828, 1828, 1836, 1853, 1861, 1861, 1853, 1853, 1861, 1870, 1878, 1886, 1886, 1895, 1903, 1920, 1936, 1945, 1953, 1961, 1978, 1995, 2020, 2037, 2053, 2078, 2095, 2120, 2137, 2153, 2162, 2170, 2178, 2178, 2187, 2187, 2178, 2162, 2145, 2120, 2095, 2062, 2037, 2003, 1970, 1945, 1920, 1903, 1886, 1870, 1861, 1845, 1836, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1820, 1828, 1828, 1828, 1828, 1836, 1828, 1828, 1828, 1820, 1820, 1820, 1828, 1828, 1828, 1820, 1820, 1811, 1811, 1811, 1803, 1803, 1811, 1811, 1820, 1820, 1811, 1811, 1803, 1795, 1803, 1803, 1803, 1795, 1795, 1795, 1803, 1803, 1811, 1811, 1811, 1803, 1811, 1820, 1836, 1845, 1845, 1845, 1836, 1828, 1828, 1828, 1828, 1820, 1803, 1795, 1795, 1795, 1795, 1786, 1778, 1770, 1778, 1786, 1795, 1795, 1786, 1778, 1778, 1803, 1836, 1870, 1911, 1978, 2062, 2137, 2170, 2112, 1945, 1711, 1478, 1336, 1319, 1428, 1586, 1728, 1803, 1811, 1795, 1786, 1803, 1828, 1845, 1845, 1828, 1820, 1820, 1836, 1853, 1861, 1861, 1861, 1861, 1861, 1878, 1886, 1886, 1886, 1886, 1895, 1911, 1928, 1945, 1953, 1961, 1970, 1987, 2012, 2028, 2045, 2062, 2078, 2095, 2112, 2120, 2128, 2137, 2145, 2145, 2145, 2137, 2128, 2112, 2095, 2078, 2053, 2028, 1995, 1970, 1945, 1920, 1903, 1886, 1861, 1861, 1845, 1836, 1836, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1811, 1820, 1820, 1811, 1820, 1820, 1836, 1845, 1845, 1836, 1828, 1828, 1828, 1836, 1828, 1820, 1811, 1795, 1795, 1803, 1803, 1795, 1786, 1778, 1778, 1786, 1795, 1795, 1778, 1770, 1778, 1803, 1836, 1861, 1911, 1970, 2053, 2137, 2187, 2145, 2003, 1778, 1536, 1377, 1344, 1436, 1594, 1728, 1811, 1820, 1803, 1786, 1795, 1820, 1836, 1836, 1828, 1820, 1828, 1845, 1861, 1861, 1861, 1853, 1861, 1861, 1878, 1878, 1886, 1886, 1886, 1903, 1920, 1936, 1945, 1953, 1961, 1978, 1995, 2020, 2037, 2053, 2078, 2095, 2112, 2128, 2137, 2145, 2153, 2162, 2162, 2162, 2153, 2145, 2128, 2112, 2087, 2062, 2028, 2003, 1970, 1945, 1928, 1903, 1886, 1870, 1861, 1845, 1836, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1820, 1828, 1828, 1828, 1820, 1811, 1811, 1811, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1820, 1820, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1803, 1795, 1795, 1795, 1795, 1803, 1803, 1811, 1811, 1811, 1811, 1811, 1828, 1836, 1845, 1845, 1836, 1836, 1828, 1828, 1828, 1820, 1811, 1803, 1803, 1803, 1795, 1786, 1778, 1770, 1770, 1778, 1786, 1786, 1778, 1770, 1770, 1786, 1820, 1853, 1886, 1936, 2012, 2103, 2170, 2170, 2062, 1853, 1603, 1394, 1311, 1361, 1511, 1669, 1778, 1811, 1795, 1778, 1786, 1803, 1828, 1828, 1820, 1811, 1820, 1828, 1845, 1853, 1853, 1853, 1853, 1861, 1870, 1878, 1878, 1878, 1886, 1903, 1920, 1936, 1945, 1945, 1961, 1978, 2003, 2028, 2045, 2062, 2078, 2095, 2112, 2137, 2145, 2153, 2162, 2170, 2178, 2187, 2178, 2170, 2153, 2128, 2103, 2078, 2053, 2020, 1987, 1953, 1928, 1911, 1886, 1870, 1861, 1853, 1836, 1828, 1828, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1820, 1820, 1820, 1811, 1811, 1803, 1803, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1795, 1795, 1803, 1811, 1811, 1820, 1811, 1811, 1811, 1820, 1836, 1845, 1845, 1845, 1836, 1836, 1828, 1828, 1820, 1811, 1803, 1795, 1795, 1786, 1786, 1778, 1778, 1778, 1786, 1795, 1795, 1786, 1770, 1770, 1778, 1811, 1845, 1886, 1936, 2012, 2095, 2153, 2153, 2045, 1845, 1586, 1369, 1269, 1311, 1453, 1628, 1761, 1820, 1820, 1795, 1795, 1803, 1828, 1836, 1828, 1828, 1828, 1836, 1853, 1861, 1861, 1853, 1853, 1861, 1861, 1878, 1886, 1886, 1895, 1903, 1920, 1936, 1945, 1945, 1953, 1970, 1995, 2020, 2045, 2053, 2070, 2087, 2103, 2120, 2137, 2145, 2153, 2162, 2170, 2170, 2170, 2162, 2145, 2120, 2103, 2078, 2062, 2028, 1995, 1961, 1936, 1920, 1903, 1886, 1870, 1861, 1845, 1836, 1836, 1836, 1836, 1836, 1836, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1828, 1828, 1836, 1836, 1828, 1828, 1828, 1836, 1836, 1836, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1811, 1811, 1811, 1803, 1803, 1795, 1795, 1803, 1803, 1803, 1803, 1803, 1803, 1811, 1811, 1811, 1811, 1811, 1811, 1820, 1828, 1836, 1845, 1836, 1828, 1820, 1820, 1828, 1828, 1820, 1811, 1803, 1803, 1795, 1795, 1786, 1778, 1778, 1786, 1795, 1795, 1795, 1778, 1770, 1778, 1803, 1845, 1878, 1936, 2012, 2087, 2153, 2145, 2053, 1861, 1628, 1428, 1327, 1361, 1486, 1644, 1761, 1811, 1803, 1786, 1786, 1811, 1828, 1845, 1836, 1820, 1820, 1828, 1845, 1861, 1861, 1853, 1853, 1861, 1861, 1870, 1878, 1886, 1886, 1895, 1903, 1920, 1936, 1945, 1953, 1970, 1987, 2003, 2028, 2045, 2053, 2070, 2087, 2103, 2120, 2128, 2137, 2145, 2145, 2145, 2137, 2137, 2128, 2112, 2095, 2070, 2045, 2012, 1978, 1953, 1928, 1911, 1895, 1878, 1861, 1861, 1853, 1845, 1836, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1811, 1811, 1820, 1820, 1820, 1828, 1828, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1811, 1811, 1811, 1811, 1820, 1828, 1845, 1845, 1845, 1836, 1828, 1820, 1828, 1828, 1828, 1820, 1803, 1795, 1795, 1795, 1795, 1778, 1770, 1770, 1778, 1786, 1795, 1786, 1778, 1770, 1778, 1811, 1853, 1886, 1936, 2003, 2078, 2145, 2153, 2062, 1861, 1628, 1419, 1319, 1361, 1503, 1669, 1778, 1820, 1803, 1778, 1778, 1803, 1828, 1845, 1836, 1828, 1820, 1836, 1853, 1861, 1861, 1861, 1853, 1861, 1870, 1878, 1886, 1886, 1886, 1895, 1911, 1928, 1936, 1945, 1961, 1970, 1995, 2012, 2037, 2053, 2070, 2078, 2103, 2120, 2137, 2153, 2162, 2162, 2170, 2170, 2170, 2162, 2145, 2128, 2103, 2078, 2053, 2020, 1995, 1961, 1928, 1911, 1886, 1878, 1861, 1861, 1845, 1836, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1795, 1795, 1795, 1795, 1795, 1803, 1803, 1803, 1803, 1803, 1811, 1811, 1811, 1811, 1811, 1828, 1836, 1845, 1845, 1845, 1836, 1836, 1836, 1828, 1820, 1811, 1795, 1795, 1795, 1795, 1786, 1778, 1770, 1770, 1778, 1786, 1786, 1778, 1770, 1770, 1778, 1811, 1853, 1895, 1953, 2028, 2103, 2153, 2120, 1987, 1770, 1519, 1327, 1269, 1344, 1503, 1669, 1786, 1820, 1803, 1786, 1786, 1811, 1836, 1836, 1828, 1820, 1820, 1836, 1853, 1861, 1861, 1853, 1853, 1861, 1870, 1878, 1886, 1886, 1895, 1903, 1920, 1936, 1945, 1953, 1961, 1978, 2003, 2020, 2045, 2062, 2078, 2095, 2112, 2137, 2153, 2162, 2170, 2170, 2178, 2178, 2178, 2170, 2162, 2145, 2120, 2095, 2062, 2028, 1995, 1961, 1936, 1911, 1895, 1878, 1861, 1853, 1845, 1836, 1836, 1828, 1828, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1803, 1803, 1811, 1803, 1803, 1803, 1811, 1828, 1836, 1845, 1836, 1828, 1820, 1820, 1828, 1820, 1811, 1795, 1778, 1778, 1778, 1786, 1786, 1778, 1770, 1770, 1770, 1770, 1778, 1770, 1778, 1786, 1803, 1836, 1861, 1911, 1978, 2062, 2145, 2187, 2128, 1961, 1720, 1478, 1327, 1311, 1411, 1569, 1720, 1795, 1811, 1795, 1786, 1795, 1820, 1836, 1836, 1828, 1820, 1820, 1836, 1853, 1853, 1853, 1845, 1853, 1861, 1861, 1870, 1870, 1878, 1886, 1903, 1920, 1928, 1936, 1945, 1953, 1970, 1995, 2012, 2028, 2045, 2062, 2078, 2095, 2120, 2128, 2145, 2145, 2153, 2153, 2153, 2145, 2137, 2120, 2103, 2078, 2053, 2037, 2012, 1987, 1953, 1928, 1903, 1878, 1861, 1853, 1845, 1845, 1845, 1845, 1836, 1828, 1828, 1828, 1828, 1828, 1820, 1811, 1803, 1811, 1820, 1836, 1836, 1836, 1836, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1836, 1836, 1836, 1836, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1811, 1811, 1820, 1811, 1811, 1811, 1820, 1836, 1845, 1845, 1845, 1836, 1828, 1836, 1836, 1836, 1828, 1820, 1811, 1803, 1803, 1803, 1795, 1786, 1786, 1786, 1795, 1795, 1795, 1786, 1778, 1778, 1803, 1836, 1861, 1903, 1961, 2037, 2128, 2178, 2153, 2028, 1836, 1603, 1436, 1394, 1453, 1578, 1711, 1795, 1811, 1803, 1803, 1811, 1828, 1845, 1845, 1836, 1828, 1836, 1845, 1853, 1861, 1853, 1853, 1853, 1861, 1870, 1870, 1878, 1878, 1878, 1886, 1903, 1920, 1928, 1936, 1953, 1970, 1987, 2003, 2012, 2028, 2045, 2062, 2078, 2095, 2112, 2112, 2120, 2120, 2128, 2128, 2120, 2112, 2103, 2087, 2070, 2045, 2020, 1995, 1961, 1936, 1920, 1903, 1886, 1870, 1861, 1845, 1836, 1836, 1828, 1828, 1820, 1811, 1811, 1811, 1820, 1828, 1828, 1820, 1811, 1811, 1811, 1820, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1803, 1803, 1803, 1803, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1811, 1811, 1803, 1811, 1820, 1828, 1836, 1845, 1836, 1828, 1828, 1828, 1828, 1828, 1820, 1811, 1803, 1803, 1803, 1795, 1786, 1778, 1778, 1786, 1795, 1795, 1786, 1786, 1778, 1795, 1820, 1853, 1886, 1936, 2012, 2103, 2162, 2153, 2045, 1861, 1636, 1461, 1394, 1444, 1569, 1703, 1795, 1811, 1803, 1786, 1795, 1820, 1836, 1836, 1820, 1811, 1811, 1828, 1853, 1861, 1853, 1845, 1836, 1845, 1861, 1870, 1878, 1886, 1886, 1895, 1903, 1920, 1928, 1936, 1945, 1961, 1978, 1995, 2012, 2028, 2045, 2053, 2078, 2095, 2112, 2120, 2128, 2128, 2137, 2137, 2137, 2128, 2112, 2095, 2070, 2053, 2028, 2003, 1970, 1945, 1920, 1895, 1878, 1861, 1861, 1845, 1836, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1828, 1828, 1820, 1820, 1811, 1811, 1811, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1811, 1811, 1811, 1803, 1803, 1811, 1828, 1845, 1845, 1845, 1836, 1828, 1828, 1836, 1836, 1820, 1811, 1795, 1795, 1795, 1795, 1786, 1778, 1770, 1770, 1778, 1786, 1786, 1778, 1770, 1778, 1803, 1836, 1870, 1911, 1970, 2053, 2145, 2195, 2153, 2012, 1795, 1561, 1402, 1369, 1453, 1603, 1736, 1811, 1820, 1803, 1786, 1803, 1820, 1836, 1836, 1828, 1820, 1820, 1836, 1853, 1853, 1853, 1845, 1853, 1861, 1870, 1878, 1886, 1886, 1895, 1903, 1920, 1928, 1936, 1936, 1953, 1970, 1995, 2020, 2037, 2045, 2062, 2087, 2103, 2120, 2137, 2145, 2153, 2153, 2162, 2162, 2162, 2145, 2137, 2112, 2095, 2070, 2037, 2003, 1978, 1953, 1928, 1911, 1895, 1878, 1861, 1845, 1836, 1836, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1820, 1820, 1820, 1811, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1795, 1795, 1795, 1795, 1803, 1803, 1811, 1811, 1811, 1803, 1803, 1820, 1828, 1845, 1853, 1845, 1836, 1828, 1828, 1828, 1828, 1820, 1803, 1795, 1786, 1786, 1786, 1778, 1770, 1761, 1770, 1778, 1786, 1786, 1770, 1770, 1778, 1803, 1836, 1870, 1920, 1987, 2070, 2153, 2187, 2120, 1945, 1703, 1461, 1311, 1302, 1419, 1594, 1728, 1803, 1803, 1778, 1770, 1786, 1811, 1828, 1828, 1820, 1820, 1828, 1836, 1853, 1853, 1845, 1845, 1853, 1861, 1878, 1878, 1878, 1878, 1886, 1903, 1928, 1936, 1945, 1953, 1961, 1978, 2003, 2028, 2045, 2062, 2078, 2095, 2120, 2137, 2153, 2162, 2170, 2178, 2187, 2187, 2178, 2170, 2153, 2128, 2103, 2078, 2045, 2012, 1987, 1953, 1936, 1911, 1895, 1870, 1861, 1845, 1836, 1836, 1836, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1795, 1795, 1795, 1803, 1803, 1803, 1803, 1795, 1795, 1795, 1803, 1803, 1811, 1811, 1811, 1811, 1820, 1836, 1845, 1845, 1836, 1836, 1828, 1828, 1828, 1828, 1820, 1811, 1803, 1795, 1795, 1786, 1786, 1778, 1770, 1770, 1778, 1786, 1786, 1786, 1778, 1778, 1795, 1828, 1861, 1903, 1970, 2053, 2137, 2178, 2145, 1995, 1778, 1536, 1361, 1311, 1394, 1544, 1694, 1786, 1820, 1803, 1795, 1795, 1820, 1836, 1845, 1836, 1828, 1828, 1836, 1845, 1853, 1853, 1853, 1861, 1861, 1870, 1878, 1886, 1886, 1895, 1903, 1911, 1920, 1928, 1936, 1953, 1970, 1987, 2003, 2020, 2037, 2053, 2070, 2095, 2112, 2120, 2128, 2137, 2145, 2153, 2153, 2153, 2137, 2128, 2112, 2095, 2070, 2045, 2012, 1978, 1953, 1928, 1911, 1895, 1878, 1861, 1853, 1845, 1845, 1836, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1811, 1811, 1811, 1820, 1828, 1836, 1845, 1836, 1828, 1828, 1828, 1836, 1836, 1828, 1811, 1803, 1803, 1803, 1803, 1795, 1786, 1770, 1770, 1778, 1795, 1795, 1786, 1778, 1778, 1786, 1820, 1853, 1886, 1936, 2012, 2095, 2170, 2187, 2095, 1903, 1661, 1444, 1336, 1361, 1486, 1644, 1761, 1811, 1811, 1795, 1795, 1811, 1828, 1836, 1828, 1820, 1820, 1828, 1845, 1853, 1853, 1853, 1853, 1861, 1861, 1878, 1878, 1886, 1886, 1895, 1911, 1928, 1936, 1936, 1953, 1970, 1987, 2012, 2028, 2045, 2053, 2070, 2095, 2112, 2128, 2145, 2153, 2153, 2162, 2162, 2162, 2153, 2145, 2128, 2112, 2087, 2062, 2028, 1995, 1970, 1945, 1920, 1903, 1886, 1870, 1861, 1853, 1845, 1845, 1836, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1795, 1795, 1803, 1803, 1803, 1803, 1803, 1811, 1828, 1836, 1845, 1845, 1836, 1828, 1828, 1828, 1828, 1820, 1803, 1795, 1786, 1786, 1786, 1778, 1770, 1761, 1770, 1778, 1786, 1786, 1778, 1761, 1761, 1778, 1820, 1861, 1895, 1953, 2028, 2112, 2170, 2162, 2037, 1820, 1561, 1369, 1302, 1369, 1528, 1686, 1786, 1811, 1795, 1778, 1778, 1803, 1828, 1836, 1828, 1820, 1820, 1828, 1836, 1845, 1845, 1845, 1853, 1861, 1870, 1878, 1878, 1878, 1886, 1895, 1911, 1928, 1945, 1953, 1961, 1978, 2003, 2020, 2045, 2062, 2078, 2095, 2112, 2128, 2145, 2153, 2170, 2178, 2178, 2187, 2187, 2178, 2162, 2137, 2120, 2087, 2062, 2028, 1995, 1970, 1945, 1920, 1903, 1886, 1861, 1861, 1845, 1836, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1803, 1803, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1795, 1795, 1795, 1795, 1795, 1795, 1795, 1795, 1795, 1803, 1811, 1811, 1811, 1803, 1803, 1811, 1820, 1836, 1845, 1836, 1836, 1828, 1828, 1828, 1828, 1820, 1803, 1795, 1795, 1795, 1795, 1786, 1778, 1761, 1761, 1770, 1786, 1786, 1786, 1770, 1770, 1778, 1811, 1853, 1886, 1945, 2020, 2103, 2162, 2153, 2028, 1811, 1553, 1344, 1261, 1327, 1486, 1653, 1770, 1811, 1803, 1778, 1786, 1803, 1828, 1836, 1828, 1820, 1820, 1836, 1853, 1853, 1853, 1853, 1853, 1861, 1878, 1886, 1886, 1886, 1886, 1895, 1911, 1936, 1945, 1953, 1961, 1978, 1995, 2012, 2037, 2053, 2078, 2095, 2112, 2137, 2153, 2162, 2170, 2178, 2178, 2187, 2187, 2178, 2162, 2145, 2128, 2103, 2070, 2045, 2012, 1978, 1953, 1928, 1903, 1878, 1870, 1861, 1853, 1845, 1836, 1836, 1828, 1828, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1803, 1803, 1811, 1811, 1811, 1811, 1820, 1828, 1845, 1845, 1836, 1828, 1828, 1828, 1828, 1828, 1820, 1811, 1803, 1795, 1795, 1795, 1786, 1770, 1761, 1770, 1786, 1795, 1795, 1778, 1770, 1770, 1795, 1828, 1861, 1911, 1978, 2062, 2145, 2187, 2137, 1987, 1753, 1511, 1336, 1302, 1394, 1553, 1703, 1795, 1820, 1803, 1786, 1795, 1820, 1836, 1836, 1828, 1820, 1828, 1836, 1853, 1861, 1861, 1861, 1861, 1861, 1870, 1870, 1870, 1878, 1886, 1903, 1920, 1928, 1936, 1945, 1953, 1970, 1995, 2020, 2028, 2045, 2053, 2070, 2087, 2112, 2128, 2137, 2145, 2153, 2153, 2153, 2153, 2145, 2128, 2112, 2095, 2070, 2045, 2020, 1987, 1961, 1936, 1911, 1886, 1870, 1861, 1853, 1836, 1836, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1820, 1820, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1811, 1811, 1811, 1811, 1811, 1803, 1795, 1795, 1803, 1803, 1803, 1803, 1795, 1795, 1803, 1811, 1811, 1811, 1803, 1803, 1811, 1828, 1836, 1845, 1845, 1828, 1828, 1828, 1828, 1828, 1820, 1811, 1795, 1795, 1795, 1795, 1786, 1778, 1770, 1770, 1778, 1786, 1786, 1778, 1770, 1778, 1795, 1828, 1861, 1911, 1970, 2053, 2137, 2187, 2145, 1987, 1761, 1519, 1361, 1327, 1419, 1578, 1728, 1803, 1820, 1795, 1778, 1786, 1811, 1836, 1836, 1828, 1820, 1820, 1836, 1845, 1853, 1853, 1853, 1853, 1861, 1870, 1870, 1878, 1878, 1895, 1911, 1928, 1936, 1945, 1945, 1953, 1978, 2003, 2028, 2045, 2062, 2070, 2087, 2112, 2128, 2145, 2153, 2162, 2170, 2170, 2170, 2170, 2162, 2153, 2128, 2112, 2078, 2045, 2012, 1978, 1953, 1928, 1903, 1886, 1870, 1861, 1853, 1845, 1836, 1828, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1820, 1820, 1820, 1811, 1811, 1811, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1820, 1820, 1820, 1811, 1811, 1803, 1803, 1811, 1811, 1803, 1803, 1795, 1795, 1795, 1803, 1803, 1795, 1795, 1795, 1803, 1803, 1811, 1811, 1811, 1820, 1828, 1836, 1836, 1836, 1836, 1828, 1828, 1836, 1836, 1828, 1811, 1795, 1795, 1795, 1795, 1786, 1770, 1761, 1761, 1770, 1778, 1786, 1778, 1770, 1761, 1778, 1811, 1845, 1878, 1928, 1995, 2078, 2153, 2170, 2078, 1878, 1636, 1411, 1294, 1327, 1461, 1628, 1753, 1811, 1803, 1786, 1786, 1803, 1828, 1836, 1828, 1820, 1820, 1828, 1845, 1853, 1853, 1845, 1845, 1853, 1861, 1878, 1886, 1886, 1895, 1903, 1920, 1936, 1945, 1953, 1961, 1970, 1995, 2012, 2037, 2053, 2070, 2087, 2112, 2137, 2153, 2170, 2170, 2178, 2178, 2187, 2187, 2187, 2170, 2153, 2128, 2103, 2070, 2045, 2012, 1978, 1945, 1920, 1903, 1878, 1861, 1853, 1845, 1836, 1836, 1828, 1828, 1828, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1795, 1795, 1795, 1803, 1803, 1795, 1795, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1803, 1811, 1828, 1845, 1845, 1845, 1828, 1828, 1820, 1828, 1828, 1820, 1811, 1795, 1795, 1786, 1786, 1778, 1770, 1761, 1770, 1778, 1786, 1786, 1770, 1761, 1761, 1786, 1820, 1861, 1911, 1978, 2062, 2137, 2178, 2128, 1961, 1720, 1461, 1286, 1261, 1361, 1536, 1694, 1786, 1811, 1795, 1778, 1786, 1811, 1828, 1828, 1820, 1811, 1820, 1836, 1853, 1861, 1853, 1853, 1853, 1861, 1861, 1878, 1878, 1886, 1895, 1911, 1920, 1936, 1945, 1953, 1961, 1987, 2003, 2028, 2045, 2062, 2070, 2095, 2120, 2137, 2162, 2170, 2178, 2178, 2178, 2187, 2187, 2178, 2162, 2145, 2120, 2095, 2062, 2028, 1995, 1970, 1945, 1920, 1895, 1878, 1870, 1861, 1853, 1845, 1836, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1820, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1811, 1811, 1803, 1803, 1795, 1795, 1795, 1795, 1795, 1795, 1795, 1795, 1803, 1803, 1803, 1803, 1803, 1803, 1811, 1820, 1836, 1836, 1836, 1828, 1828, 1828, 1828, 1828, 1820, 1811, 1803, 1795, 1795, 1786, 1778, 1770, 1770, 1770, 1778, 1786, 1786, 1778, 1770, 1778, 1795, 1836, 1870, 1920, 1987, 2078, 2153, 2187, 2120, 1945, 1711, 1469, 1311, 1294, 1402, 1569, 1720, 1803, 1811, 1795, 1786, 1795, 1820, 1836, 1836, 1828, 1828, 1828, 1845, 1853, 1861, 1853, 1853, 1853, 1861, 1870, 1878, 1878, 1886, 1895, 1911, 1928, 1936, 1936, 1945, 1953, 1978, 1995, 2020, 2037, 2053, 2070, 2095, 2112, 2128, 2145, 2153, 2162, 2162, 2170, 2170, 2162, 2153, 2137, 2120, 2103, 2078, 2053, 2020, 1987, 1961, 1936, 1911, 1895, 1878, 1861, 1853, 1845, 1836, 1836, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1803, 1803, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1795, 1803, 1803, 1811, 1820, 1811, 1811, 1811, 1820, 1828, 1836, 1845, 1836, 1836, 1828, 1828, 1828, 1820, 1811, 1803, 1795, 1795, 1795, 1786, 1778, 1770, 1770, 1778, 1786, 1795, 1786, 1770, 1770, 1778, 1803, 1845, 1878, 1920, 1995, 2078, 2162, 2187, 2120, 1928, 1678, 1436, 1302, 1311, 1444, 1611, 1745, 1811, 1811, 1786, 1778, 1795, 1820, 1836, 1828, 1820, 1820, 1828, 1845, 1861, 1861, 1853, 1853, 1853, 1861, 1878, 1886, 1886, 1895, 1895, 1911, 1928, 1936, 1945, 1953, 1961, 1987, 2012, 2037, 2053, 2070, 2078, 2103, 2120, 2145, 2153, 2170, 2170, 2178, 2178, 2187, 2178, 2170, 2153, 2137, 2112, 2078, 2053, 2020, 1987, 1961, 1936, 1920, 1895, 1870, 1861, 1853, 1845, 1836, 1836, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1820, 1820, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1795, 1795, 1795, 1795, 1795, 1803, 1803, 1803, 1803, 1795, 1786, 1786, 1786, 1795, 1803, 1811, 1811, 1811, 1811, 1811, 1828, 1836, 1845, 1845, 1836, 1828, 1828, 1820, 1820, 1820, 1803, 1795, 1795, 1786, 1786, 1778, 1770, 1761, 1770, 1778, 1786, 1786, 1770, 1761, 1761, 1786, 1820, 1861, 1895, 1953, 2037, 2128, 2187, 2153, 2012, 1778, 1511, 1319, 1269, 1352, 1528, 1686, 1786, 1811, 1795, 1770, 1778, 1803, 1828, 1828, 1820, 1811, 1820, 1828, 1845, 1845, 1845, 1836, 1845, 1861, 1870, 1886, 1886, 1886, 1886, 1903, 1920, 1936, 1945, 1953, 1961, 1978, 2003, 2028, 2045, 2062, 2070, 2087, 2112, 2137, 2153, 2170, 2178, 2187, 2187, 2187, 2187, 2178, 2170, 2153, 2137, 2103, 2070, 2037, 2003, 1970, 1945, 1920, 1895, 1878, 1861, 1853, 1845, 1845, 1836, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1820, 1820, 1820, 1820, 1811, 1811, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1795, 1803, 1803, 1803, 1795, 1795, 1795, 1803, 1795, 1795, 1795, 1795, 1795, 1803, 1811, 1811, 1803, 1803, 1811, 1828, 1836, 1845, 1836, 1828, 1820, 1820, 1820, 1820, 1820, 1811, 1803, 1795, 1795, 1795, 1786, 1770, 1770, 1770, 1786, 1795, 1795, 1778, 1770, 1770, 1786, 1828, 1861, 1911, 1987, 2078, 2162, 2195, 2137, 1961, 1720, 1461, 1294, 1277, 1377, 1553, 1711, 1795, 1811, 1795, 1778, 1786, 1811, 1828, 1828, 1828, 1820, 1828, 1845, 1853, 1853, 1853, 1845, 1853, 1861, 1870, 1878, 1886, 1886, 1895, 1911, 1920, 1936, 1945, 1945, 1961, 1978, 2003, 2020, 2045, 2053, 2070, 2087, 2112, 2128, 2145, 2162, 2170, 2170, 2170, 2178, 2170, 2162, 2153, 2137, 2120, 2087, 2062, 2028, 1995, 1970, 1945, 1920, 1903, 1878, 1861, 1853, 1845, 1836, 1836, 1828, 1828, 1828, 1820, 1820, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1828, 1820, 1820, 1828, 1828, 1828, 1828, 1836, 1828, 1828, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1795, 1795, 1795, 1803, 1803, 1803, 1795, 1795, 1795, 1795, 1803, 1811, 1811, 1811, 1811, 1820, 1828, 1836, 1845, 1836, 1828, 1828, 1820, 1820, 1820, 1811, 1811, 1803, 1803, 1795, 1786, 1778, 1770, 1770, 1778, 1786, 1795, 1786, 1770, 1761, 1778, 1803, 1845, 1878, 1936, 2012, 2103, 2178, 2195, 2103, 1903, 1661, 1436, 1319, 1352, 1478, 1644, 1761, 1811, 1803, 1786, 1786, 1803, 1828, 1836, 1828, 1820, 1811, 1828, 1836, 1853, 1853, 1845, 1845, 1853, 1861, 1870, 1878, 1886, 1886, 1895, 1903, 1920, 1936, 1945, 1953, 1970, 1987, 2012, 2028, 2045, 2062, 2078, 2095, 2120, 2137, 2145, 2153, 2162, 2170, 2170, 2170, 2170, 2153, 2137, 2120, 2103, 2078, 2045, 2012, 1978, 1945, 1928, 1903, 1886, 1870, 1861, 1853, 1836, 1836, 1836, 1828, 1828, 1820, 1820, 1811, 1811, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1811, 1811, 1803, 1803, 1795, 1795, 1795, 1795, 1786, 1786, 1786, 1795, 1803, 1811, 1811, 1803, 1803, 1811, 1820, 1836, 1845, 1836, 1828, 1820, 1820, 1820, 1820, 1820, 1803, 1795, 1795, 1795, 1795, 1786, 1770, 1753, 1761, 1770, 1786, 1795, 1778, 1761, 1761, 1778, 1811, 1853, 1895, 1953, 2028, 2112, 2178, 2170, 2053, 1836, 1578, 1369, 1294, 1361, 1519, 1678, 1786, 1811, 1803, 1778, 1786, 1811, 1828, 1828, 1820, 1811, 1820, 1836, 1853, 1853, 1853, 1845, 1853, 1861, 1878, 1886, 1886, 1886, 1895, 1903, 1920, 1936, 1945, 1953, 1961, 1987, 2003, 2028, 2045, 2053, 2070, 2087, 2112, 2137, 2153, 2162, 2170, 2178, 2187, 2195, 2195, 2187, 2170, 2153, 2128, 2103, 2078, 2045, 2012, 1987, 1961, 1936, 1911, 1886, 1870, 1861, 1845, 1836, 1836, 1828, 1828, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1803, 1803, 1803, 1803, 1795, 1795, 1795, 1795, 1795, 1795, 1786, 1786, 1795, 1803, 1811, 1811, 1811, 1811, 1811, 1820, 1836, 1836, 1836, 1828, 1820, 1820, 1820, 1820, 1820, 1803, 1795, 1795, 1795, 1795, 1786, 1770, 1761, 1761, 1770, 1786, 1786, 1778, 1761, 1761, 1778, 1811, 1853, 1886, 1945, 2028, 2120, 2187, 2170, 2037, 1811, 1544, 1336, 1261, 1336, 1503, 1669, 1778, 1811, 1795, 1770, 1778, 1803, 1828, 1836, 1828, 1820, 1820, 1828, 1845, 1853, 1853, 1853, 1853, 1861, 1870, 1878, 1886, 1886, 1886, 1903, 1920, 1936, 1953, 1961, 1961, 1978, 1995, 2020, 2037, 2062, 2078, 2095, 2120, 2145, 2153, 2170, 2170, 2178, 2187, 2187, 2195, 2187, 2178, 2162, 2137, 2112, 2078, 2045, 2020, 1987, 1961, 1936, 1911, 1886, 1870, 1861, 1845, 1836, 1828, 1828, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1820, 1820, 1820, 1828, 1828, 1820, 1820, 1820, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1803, 1803, 1795, 1795, 1786, 1786, 1795, 1803, 1811, 1811, 1811, 1811, 1811, 1820, 1828, 1836, 1836, 1828, 1820, 1820, 1828, 1828, 1820, 1811, 1803, 1795, 1795, 1795, 1786, 1778, 1778, 1778, 1786, 1795, 1786, 1778, 1770, 1770, 1795, 1820, 1861, 1903, 1970, 2053, 2145, 2203, 2162, 2012, 1778, 1528, 1344, 1294, 1377, 1544, 1703, 1795, 1820, 1803, 1778, 1786, 1803, 1828, 1836, 1828, 1820, 1820, 1836, 1845, 1853, 1853, 1853, 1853, 1861, 1870, 1878, 1886, 1886, 1895, 1903, 1911, 1928, 1936, 1945, 1953, 1970, 1987, 2003, 2020, 2037, 2062, 2078, 2095, 2112, 2128, 2137, 2153, 2153, 2162, 2162, 2162, 2153, 2137, 2120, 2103, 2078, 2053, 2028, 1995, 1970, 1945, 1920, 1903, 1878, 1861, 1861, 1845, 1836, 1836, 1836, 1828, 1828, 1820, 1820, 1820, 1811, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1811, 1803, 1803, 1795, 1795, 1795, 1795, 1803, 1803, 1803, 1795, 1795, 1803, 1803, 1811, 1811, 1811, 1811, 1811, 1828, 1836, 1836, 1836, 1828, 1820, 1828, 1828, 1828, 1820, 1811, 1803, 1803, 1803, 1795, 1786, 1770, 1761, 1770, 1778, 1795, 1795, 1786, 1778, 1778, 1795, 1828, 1861, 1895, 1961, 2045, 2145, 2203, 2187, 2053, 1828, 1578, 1394, 1327, 1402, 1553, 1703, 1795, 1820, 1803, 1786, 1786, 1811, 1828, 1836, 1828, 1820, 1828, 1836, 1845, 1853, 1853, 1853, 1853, 1861, 1870, 1870, 1878, 1878, 1886, 1895, 1911, 1928, 1936, 1945, 1961, 1978, 1995, 2012, 2028, 2045, 2062, 2087, 2103, 2128, 2137, 2145, 2153, 2162, 2170, 2170, 2170, 2162, 2153, 2137, 2120, 2095, 2062, 2028, 2003, 1970, 1945, 1928, 1903, 1878, 1861, 1853, 1845, 1845, 1836, 1836, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1820, 1820, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1795, 1795, 1795, 1795, 1795, 1795, 1803, 1811, 1811, 1803, 1803, 1795, 1803, 1820, 1828, 1836, 1836, 1828, 1820, 1820, 1820, 1828, 1820, 1811, 1803, 1795, 1795, 1795, 1786, 1778, 1761, 1770, 1778, 1786, 1786, 1778, 1761, 1761, 1778, 1811, 1853, 1895, 1945, 2020, 2103, 2178, 2187, 2087, 1870, 1619, 1394, 1302, 1344, 1494, 1661, 1778, 1811, 1803, 1778, 1778, 1803, 1828, 1845, 1828, 1820, 1811, 1820, 1836, 1853, 1853, 1845, 1845, 1853, 1861, 1878, 1878, 1886, 1886, 1895, 1911, 1928, 1936, 1945, 1961, 1970, 1995, 2012, 2037, 2053, 2078, 2095, 2112, 2128, 2145, 2162, 2170, 2178, 2187, 2187, 2187, 2178, 2170, 2153, 2137, 2112, 2078, 2045, 2012, 1987, 1961, 1936, 1911, 1886, 1870, 1853, 1845, 1836, 1828, 1828, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1786, 1795, 1795, 1803, 1803, 1795, 1795, 1795, 1795, 1803, 1803, 1803, 1803, 1803, 1811, 1820, 1836, 1836, 1836, 1828, 1828, 1828, 1828, 1828, 1811, 1803, 1795, 1786, 1795, 1786, 1778, 1770, 1761, 1770, 1778, 1786, 1778, 1770, 1761, 1770, 1795, 1828, 1870, 1911, 1978, 2070, 2153, 2195, 2137, 1961, 1711, 1453, 1286, 1269, 1394, 1561, 1720, 1803, 1811, 1786, 1770, 1786, 1811, 1828, 1828, 1820, 1811, 1820, 1845, 1861, 1861, 1853, 1853, 1853, 1861, 1878, 1886, 1895, 1895, 1903, 1911, 1928, 1936, 1945, 1953, 1970, 1987, 2012, 2037, 2053, 2070, 2087, 2103, 2128, 2145, 2162, 2170, 2170, 2178, 2187, 2195, 2195, 2187, 2178, 2153, 2137, 2103, 2078, 2045, 2012, 1970, 1945, 1920, 1903, 1886, 1870, 1861, 1853, 1836, 1828, 1828, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1795, 1795, 1795, 1795, 1795, 1795, 1795, 1803, 1803, 1803, 1803, 1795, 1803, 1811, 1828, 1836, 1836, 1828, 1820, 1820, 1820, 1820, 1820, 1811, 1803, 1795, 1795, 1795, 1786, 1770, 1761, 1761, 1770, 1778, 1778, 1778, 1761, 1761, 1778, 1811, 1845, 1886, 1953, 2037, 2128, 2195, 2187, 2062, 1845, 1586, 1369, 1277, 1327, 1469, 1636, 1761, 1803, 1803, 1786, 1786, 1803, 1828, 1836, 1828, 1820, 1820, 1828, 1836, 1853, 1853, 1853, 1853, 1861, 1870, 1870, 1878, 1878, 1878, 1886, 1903, 1920, 1936, 1945, 1953, 1961, 1987, 2003, 2020, 2037, 2053, 2070, 2087, 2112, 2128, 2145, 2153, 2153, 2162, 2162, 2162, 2162, 2153, 2137, 2120, 2095, 2070, 2037, 2012, 1978, 1953, 1936, 1911, 1895, 1870, 1861, 1853, 1845, 1836, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1820, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1803, 1811, 1811, 1811, 1811, 1803, 1803, 1795, 1795, 1795, 1803, 1803, 1803, 1803, 1795, 1795, 1795, 1795, 1803, 1811, 1811, 1811, 1811, 1820, 1828, 1836, 1845, 1836, 1836, 1836, 1836, 1836, 1828, 1820, 1803, 1795, 1795, 1795, 1795, 1786, 1778, 1770, 1778, 1786, 1795, 1786, 1770, 1770, 1778, 1803, 1845, 1870, 1920, 1987, 2070, 2170, 2220, 2170, 2003, 1761, 1511, 1344, 1327, 1436, 1594, 1736, 1811, 1811, 1795, 1786, 1803, 1828, 1845, 1836, 1828, 1820, 1828, 1845, 1853, 1853, 1853, 1845, 1853, 1861, 1870, 1878, 1878, 1878, 1886, 1903, 1928, 1936, 1945, 1945, 1953, 1970, 1995, 2020, 2037, 2053, 2070, 2087, 2112, 2128, 2145, 2162, 2170, 2170, 2178, 2178, 2178, 2170, 2153, 2137, 2112, 2087, 2062, 2028, 2003, 1970, 1945, 1920, 1895, 1878, 1861, 1861, 1853, 1845, 1836, 1828, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1820, 1820, 1820, 1820, 1811, 1811, 1820, 1820, 1828, 1828, 1820, 1820, 1811, 1811, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1795, 1795, 1795, 1803, 1803, 1803, 1795, 1795, 1786, 1786, 1795, 1803, 1803, 1803, 1803, 1803, 1811, 1828, 1836, 1845, 1845, 1828, 1820, 1820, 1828, 1828, 1820, 1803, 1795, 1786, 1786, 1786, 1778, 1770, 1770, 1770, 1778, 1786, 1786, 1770, 1761, 1761, 1786, 1820, 1861, 1895, 1953, 2037, 2128, 2203, 2187, 2053, 1828, 1561, 1352, 1286, 1361, 1528, 1694, 1795, 1820, 1795, 1778, 1778, 1803, 1828, 1836, 1828, 1820, 1811, 1828, 1845, 1853, 1853, 1845, 1845, 1861, 1861, 1870, 1878, 1878, 1886, 1903, 1920, 1936, 1945, 1945, 1961, 1978, 2003, 2020, 2045, 2053, 2070, 2087, 2112, 2128, 2145, 2162, 2170, 2178, 2187, 2195, 2195, 2187, 2170, 2153, 2137, 2112, 2078, 2045, 2012, 1987, 1953, 1928, 1903, 1886, 1861, 1861, 1845, 1836, 1828, 1820, 1820, 1811, 1811, 1811, 1811, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1820, 1820, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1795, 1786, 1786, 1786, 1795, 1795, 1795, 1795, 1786, 1778, 1786, 1795, 1795, 1803, 1795, 1795, 1795, 1803, 1820, 1836, 1845, 1836, 1828, 1820, 1820, 1820, 1820, 1811, 1803, 1795, 1786, 1786, 1786, 1778, 1761, 1753, 1753, 1761, 1778, 1778, 1761, 1753, 1761, 1778, 1820, 1861, 1895, 1961, 2045, 2137, 2195, 2170, 2020, 1786, 1519, 1319, 1261, 1352, 1519, 1686, 1786, 1820, 1803, 1778, 1786, 1811, 1828, 1836, 1828, 1820, 1820, 1836, 1845, 1853, 1853, 1845, 1853, 1861, 1870, 1878, 1886, 1886, 1895, 1911, 1928, 1936, 1945, 1953, 1961, 1978, 2012, 2037, 2053, 2062, 2078, 2095, 2112, 2137, 2162, 2178, 2187, 2187, 2195, 2195, 2195, 2195, 2187, 2170, 2145, 2120, 2087, 2053, 2020, 1987, 1953, 1928, 1911, 1895, 1878, 1861, 1853, 1845, 1836, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1811, 1803, 1803, 1795, 1795, 1795, 1803, 1803, 1795, 1795, 1795, 1795, 1803, 1811, 1803, 1803, 1803, 1811, 1828, 1836, 1845, 1836, 1828, 1820, 1820, 1820, 1820, 1811, 1795, 1795, 1795, 1795, 1795, 1786, 1770, 1770, 1770, 1778, 1786, 1786, 1770, 1770, 1778, 1795, 1836, 1870, 1928, 2003, 2095, 2178, 2203, 2128, 1945, 1686, 1436, 1286, 1286, 1411, 1586, 1728, 1803, 1811, 1786, 1778, 1786, 1811, 1836, 1836, 1828, 1820, 1828, 1845, 1853, 1853, 1853, 1845, 1853, 1861, 1878, 1878, 1878, 1878, 1886, 1903, 1920, 1928, 1936, 1945, 1953, 1970, 1995, 2012, 2028, 2045, 2062, 2087, 2103, 2120, 2137, 2145, 2145, 2153, 2153, 2162, 2162, 2153, 2145, 2128, 2112, 2087, 2053, 2020, 1987, 1961, 1936, 1911, 1895, 1878, 1861, 1861, 1853, 1845, 1836, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1828, 1828, 1828, 1828, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1795, 1795, 1803, 1803, 1803, 1803, 1803, 1803, 1811, 1811, 1811, 1803, 1803, 1811, 1820, 1836, 1836, 1828, 1820, 1820, 1820, 1828, 1828, 1811, 1803, 1795, 1786, 1795, 1795, 1786, 1778, 1770, 1770, 1778, 1786, 1786, 1778, 1770, 1778, 1803, 1836, 1861, 1911, 1987, 2078, 2170, 2220, 2162, 1995, 1753, 1503, 1352, 1336, 1444, 1603, 1736, 1803, 1811, 1786, 1778, 1795, 1820, 1836, 1836, 1828, 1820, 1828, 1845, 1853, 1853, 1845, 1845, 1853, 1861, 1870, 1878, 1878, 1878, 1886, 1895, 1911, 1928, 1936, 1936, 1953, 1970, 1995, 2020, 2037, 2053, 2062, 2078, 2103, 2120, 2137, 2153, 2162, 2170, 2170, 2170, 2170, 2153, 2145, 2128, 2112, 2087, 2062, 2028, 1995, 1970, 1945, 1920, 1895, 1870, 1861, 1853, 1845, 1845, 1836, 1828, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1820, 1820, 1820, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1786, 1795, 1795, 1803, 1811, 1803, 1803, 1803, 1811, 1828, 1836, 1845, 1845, 1836, 1828, 1820, 1828, 1828, 1820, 1811, 1803, 1795, 1795, 1786, 1778, 1770, 1761, 1770, 1778, 1786, 1778, 1770, 1761, 1761, 1786, 1820, 1861, 1895, 1953, 2028, 2128, 2195, 2195, 2070, 1853, 1594, 1394, 1302, 1369, 1519, 1678, 1778, 1811, 1795, 1778, 1786, 1803, 1828, 1836, 1828, 1820, 1820, 1828, 1845, 1853, 1853, 1853, 1853, 1861, 1861, 1870, 1870, 1878, 1886, 1895, 1911, 1928, 1945, 1953, 1961, 1978, 1995, 2012, 2037, 2053, 2070, 2087, 2112, 2128, 2145, 2153, 2162, 2170, 2187, 2187, 2187, 2178, 2170, 2153, 2128, 2103, 2078, 2045, 2012, 1987, 1953, 1928, 1911, 1886, 1870, 1861, 1845, 1836, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1811, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1803, 1795, 1795, 1795, 1795, 1795, 1795, 1795, 1786, 1786, 1795, 1803, 1803, 1803, 1803, 1803, 1811, 1820, 1828, 1836, 1836, 1836, 1828, 1828, 1828, 1820, 1811, 1803, 1795, 1795, 1786, 1786, 1778, 1761, 1761, 1761, 1778, 1786, 1778, 1770, 1753, 1761, 1786, 1828, 1861, 1911, 1970, 2053, 2153, 2203, 2170, 2012, 1761, 1494, 1311, 1269, 1369, 1544, 1703, 1795, 1811, 1795, 1778, 1786, 1811, 1828, 1836, 1820, 1811, 1820, 1836, 1845, 1853, 1853, 1845, 1853, 1861, 1861, 1878, 1886, 1886, 1895, 1903, 1920, 1928, 1945, 1953, 1970, 1987, 2012, 2028, 2037, 2053, 2078, 2095, 2120, 2145, 2162, 2170, 2178, 2187, 2195, 2195, 2195, 2187, 2178, 2162, 2145, 2120, 2087, 2053, 2012, 1978, 1953, 1928, 1911, 1886, 1870, 1861, 1861, 1853, 1836, 1828, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1820, 1811, 1811, 1820};


const uint32_t heartbeat_length = sizeof(heartbeat_signal) / sizeof(heartbeat_signal[0]); //length of heartbeat_signal, should be 7500 (30 sec of data)

const uint8_t PACKET_SAMPLES = 10;
uint8_t packet_id = 0;  
uint16_t packet_buffer[PACKET_SAMPLES]; // buffer for samples that are being streamed, creates allocation in RAM
uint8_t sample_index = 0;
String cmd_buffer = "";
bool streaming = false;
const int trigger_output_pin = 26;
int total_sample_count = 0;

void startStreaming() {
    packet_id = 1;    // reset packet ID
    sample_index = 0; // reset sample buffer index
    total_sample_count = 0;
    streaming = true;

    // Send HIGH trigger pulse to signal generator
    digitalWrite(trigger_output_pin, HIGH);
    delay(100);  // Keep HIGH for 100ms
    digitalWrite(trigger_output_pin, LOW);  // Return to LOW


    // DEBUG: Confirm function was called
    digitalWrite(LED_PIN, HIGH);  // Turn LED on when START received
    delay(500);
    digitalWrite(LED_PIN, LOW);
    delay(500);
    digitalWrite(LED_PIN, HIGH);  // Blink twice
    delay(500);
    digitalWrite(LED_PIN, LOW);
}


void sendPacket(uint16_t *data) {
  // Calculate total packet size
  // Header (2) + Packet ID (1) + Timestamp (4) + 10 samples (20) + End marker (1) = 28 bytes
  const uint8_t packet_size = 2 + 1 + 4 + (PACKET_SAMPLES * 2) + 1; //make this PACKET_SAMPLES * 2 for 12 bit !!
  uint8_t packet[packet_size];
  uint8_t index = 0;
  
  // assign header to the first two bytes
  packet[index++] = HEADER_1;
  packet[index++] = HEADER_2;

  // assign packet ID to the third byte
  packet[index++] = packet_id;
  packet_id++;  // increment after assigning
  if (packet_id == 0) packet_id = 1;  // in case of overflow wrap

  // assign timestamp to bytes 4-7 (4 bytes, little-endian)
  unsigned long timestamp = millis();
  memcpy(&packet[index], &timestamp, sizeof(timestamp));
  index += sizeof(timestamp);

  // assign each of 10 signal values (2 bytes each) to bytes 8-27
  for (uint8_t i = 0; i < PACKET_SAMPLES; i++) {
    uint16_t sample = data[i] & 0x0FFF; // bit mask so only the 12bits are stored in a sample (optional but good to have)
    memcpy(&packet[index], &sample, sizeof(uint16_t));
    index += sizeof(uint16_t);
  }

  // assign end marker to last byte, 28
  packet[index++] = END_MARKER;

  // send entire packet at once
  //Serial.print(packet);
  Serial.write(packet, sizeof(packet));

  // Serial.print("Packet ID: ");
  // Serial.print(packet_id - 1);
  // Serial.print(" | Data: ");
  // for (uint8_t i = 0; i < packet_size; i++) {
  //     Serial.print(packet[i], HEX);
  //     Serial.print(" ");
  // }
  // Serial.println();

}

void setup() {
  // put your setup code here, to run once:
  Serial.begin(115200);
  // pinMode(34, INPUT);
  // // pinMode(26, OUTPUT);
  // // digitalWrite(26, LOW);
  // analogReadResolution(8);
  
  // DIAGNOSTIC: Print reset reason
  esp_reset_reason_t reason = esp_reset_reason();
  Serial.print("RESET_REASON:");
  Serial.println(reason);
  
  // Print startup message with timestamp
  Serial.print("BOOT_TIME:");
  Serial.println(millis());
}

void addADCSampleToBuffer() { 
  if (total_sample_count >= heartbeat_length) {
        streaming = false;
        return;
    }

  uint16_t sample = heartbeat_signal[total_sample_count];
  total_sample_count++;
  packet_buffer[sample_index++] = sample; 
  if (sample_index >= PACKET_SAMPLES) { 
    sendPacket(packet_buffer); 
    sample_index = 0; 
  } 
} 
  
void loop() { 
  if (Serial.available()) {
    char c = Serial.read();

    if (c == '\n') { // end of command
      if (cmd_buffer == "START") {
        digitalWrite(trigger_output_pin, HIGH);
        startStreaming();
      }
      else if (cmd_buffer == "STOP") {
        digitalWrite(trigger_output_pin, LOW);
        streaming = false;
      }
      cmd_buffer = ""; // reset after each command
    } 
    else {
      cmd_buffer += c; // accumulate characters
    }
  }
  
  if (streaming) { 
    static unsigned long 
    last_sample_time = 0; 
    if (micros() - last_sample_time >= 4000) { 
      addADCSampleToBuffer(); 
      last_sample_time = micros(); 
    } 
  } 
}


